define(function(e,t,i){"use strict";function E(){$("<div>",{"class":"avril-parent-work",html:B}).insertBefore($("#editor-holder"));$(".working-set-splitview-btn").appendTo($(".todoFunction")),$(".working-set-option-btn").appendTo($(".todoFunction")),$("#working-set-list-container").appendTo($(".avril-tabs-work")),$(".sidebar-selection").remove(),$(".sidebar-selection-extension").remove(),$(".todoFunction .scroller-shadow").remove(),$(".working-set-header").remove();var t=$(".avril-tabs-work ul");P(t)}function P(e){var t=$("#avril-val"),i=parseInt(t.val(),10),r=function(r){r=window.event||r;var a=Math.max(-1,Math.min(1,r.wheelDelta||-r.detail)),o=parseInt(t.val(),10),l=0>a?i+o:o-i,n=e[0].scrollWidth-$(".open-files-container").width(),s=l>n?n:0>l?0:l;t.val(s);var c=t.val();$(this).scrollLeft(c),r.preventDefault()};e.on("mousewheel",r)}function D(){var e=$("#workfile-avril");e.hide(),$(".all-workfile").click(function(t){t.stopPropagation(),j(),e.toggle("fast")})}function j(){$("#workfile-avril").children().remove(),$(".avril-tabs-work #working-set-list-container ul").clone(!0).appendTo("#workfile-avril"),$("#workfile-avril").click(H)}function H(){$("#workfile-avril").hide(),$("#workfile-avril").children().remove()}function W(){o.toggle(h)}function q(){f.set(g,!f.get(g)),f.save()}function C(){var e=$("#fullScreenSidebar-avril");n.isVisible()?e.html("←").attr("title","Hide Sidebar").css("color","#37b1ac"):e.html("→").attr("title","Show Sidebar"),h.on("panelCollapsed",function(){e.html("→").attr("title","Show Sidebar"),e.css("color")&&e.removeAttr("style")}),h.on("panelExpanded",function(){e.html("←").attr("title","Hide Sidebar").css("color","#37b1ac")})}function I(){window.setTimeout(function(){var e=$(".content .working-file-tabs-container").length,t=$("#editor-holder #ext-documents").length,i=$(".content .gt-tabs").length,r=$("#status-bar .extension-toolbar").length,a="<br> Brackets Working File Tabs",o="<br> Documents Toolbar",l="<br> Brackets File Tabs",n="<br> Extensions Toolbar Reposition",s=function(){return!e||t||i||r?!t||e||i||r?!i||t||e||r?!r||e||t||i?e&&t&&!i&&!r?[a,o]:e&&i&&!t&&!r?[a,l]:e&&r&&!t&&!r?[a,n]:t&&i&&!e&&!r?[o,l]:t&&r&&!e&&!i?[o,n]:i&&r&&!e&&!t?[a,o]:e&&t&&i&&!r?[a,o,l]:e&&t&&r&&!i?[a,o,n]:e&&i&&r&&!t?[a,l,n]:e&&t&&i&&r?[a,o,l,n]:void 0:n:l:o:a},c=s();(e||t||i||r)&&v.showModalDialog(k,"Tabs - Custom Working",b+"<br>"+c)},2e3)}var r=brackets.getModule("utils/AppInit"),a=brackets.getModule("utils/ExtensionUtils"),o=brackets.getModule("utils/Resizer"),l=brackets.getModule("editor/EditorManager"),n=brackets.getModule("project/SidebarView"),v=(brackets.getModule("view/MainViewManager"),brackets.getModule("view/WorkspaceManager"),brackets.getModule("project/ProjectManager"),brackets.getModule("widgets/Dialogs")),u=brackets.getModule("preferences/PreferencesManager"),f=u.getExtensionPrefs("customToolbar"),b="it is possible that a similar extension to this is interfering with the operation <br> Please uninstall the extensions similar to this.",k="fjkgsd.avril",g="red",h=$("#sidebar"),w=$("#main-toolbar");a.loadStyleSheet(i,"style/style.min.css");var p='<input type="hidden" value="15" id="avril-val" style="display:none;">',m='<div class="btn-sidebar-bks btn-alt-quiet" id="fullScreenSidebar-avril"></div>',M='<div class="avril-tabs-work"></div>',S='<div id="workfile-avril"><span></span></div>',T='<div class="all-workfile btn-alt-quiet" title="Show worklist">≡</div>',x='<div id="fullmainToolbar-avril" class="btn-mainToolbar-bks btn-alt-quiet" title="Hide toolBar">»</div>',y=p+m+M+T+x,B='<div class="todoFunction">'+y+"</div>"+S;$(l).on("activeEditorChange documentSaved",H),f.definePreference(g,"boolean","true").on("change",function(){var e=$(".content"),t=f.get(g);t?w.show("fast"):w.hide("fast");var i=t?30:0,r=t?"»":"«",a=t?"Hide toolBar":"Show toolBar";e.animate({right:i},"fast",function(){$("#fullmainToolbar-avril").html(r).attr("title",a)})});var R=function(){E(),D(),$("#fullScreenSidebar-avril").click(W),$("#fullmainToolbar-avril").click(q),C()};r.appReady(R),r.extensionsLoaded(I)});